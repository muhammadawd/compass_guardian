{"remainingRequest":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/muhammadawd/WebstormProjects/Guardian/src/views/Reports/TeacherComplaintsReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/muhammadawd/WebstormProjects/Guardian/src/views/Reports/TeacherComplaintsReport.vue","mtime":1581413022799},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport Multiselect from 'vue-multiselect'\nimport 'vue-multiselect/dist/vue-multiselect.min.css'\n\nexport default {\n  data() {\n    return {\n      itemsPerPage: 20,\n      isMounted: false,\n\n      complaints: [],\n      students: [],\n      selectedStudent: null,\n      teachers: [],\n      selectedTeacher: null,\n      isMulti: false,\n    }\n  },\n  mounted() {\n    let vm = this;\n    vm.getAllTeachers()\n    vm.getAllTeacherComplaints()\n  },\n  watch: {\n  },\n  components: {Multiselect},\n  computed: {},\n  methods: {\n    customStageLabel({translated}) {\n      return `${translated.title}`\n    },\n    customStudentLabel({name}) {\n      return `${name}`\n    },\n    getAllTeachers() {\n      let vm = this;\n      vm.$root.$children[0].$refs.loader.show_loader = true;\n      try {\n        window.serviceAPI.API().get(window.serviceAPI.ALL_TEACHERS )\n          .then((response) => {\n            vm.$root.$children[0].$refs.loader.show_loader = false;\n            response = response.data;\n            if (response.status) {\n              vm.teachers = response.data.teachers.data;\n              return\n            }\n            vm.teachers = [];\n          }).catch((error) => {\n          vm.$root.$children[0].$refs.loader.show_loader = false;\n          window.helper.handleError(error, vm);\n          vm.teachers = [];\n        });\n      } catch (e) {\n        console.log(e)\n      }\n    },\n    getAllTeacherComplaints() {\n      let vm = this;\n      vm.$root.$children[0].$refs.loader.show_loader = true;\n      let teacher_id = vm.selectedTeacher ? vm.selectedTeacher.id : '';\n      // let class_room_id = vm.selectedClassRooms ? vm.selectedClassRooms.id : -1;\n      // let student_term_id = vm.selectedStudent ? vm.selectedStudent.student_term.id : -1;\n\n      try {\n        window.serviceAPI.API().get(window.serviceAPI.ALL_PARENTS_COMPLAINTS, {\n          params: {\n            type: 'complaint',\n            teacher_id : teacher_id ,\n            // class_room_id: class_room_id,\n            // student_term_id: student_term_id,\n          }\n        })\n          .then((response) => {\n            vm.$root.$children[0].$refs.loader.show_loader = false;\n            response = response.data;\n            if (response.status) {\n              vm.complaints = response.data.complaints.data;\n              return\n            }\n            vm.complaints = [];\n          }).catch((error) => {\n          vm.$root.$children[0].$refs.loader.show_loader = false;\n          window.helper.handleError(error, vm);\n          vm.complaints = [];\n        });\n      } catch (e) {\n        console.log(e)\n      }\n    },\n  }\n}\n",{"version":3,"sources":["TeacherComplaintsReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeacherComplaintsReport.vue","sourceRoot":"src/views/Reports","sourcesContent":["<template>\n  <div>\n\n    <div class=\"vx-row\">\n      <div class=\"vx-col w-full\">\n        <div class=\"vx-row  text-right\">\n          <div class=\"vx-col md:w-1/4 mb-base\">\n            <label class=\"vs-input--label\">{{$ml.get('teachers')}}</label>\n            <multiselect class=\"d-print-none\" v-model=\"selectedTeacher\" :options=\"teachers\" open-direction=\"bottom\"\n                         :close-on-select=\"true\"\n                         :clear-on-select=\"false\" :preserve-search=\"true\" :placeholder=\"$ml.get('search')\"\n                         :custom-label=\"customStudentLabel\" :maxHeight=\"80\"\n                         track-by=\"id\" :preselect-first=\"true\">\n            </multiselect>\n            <span class=\"span-text-validation text-danger text-bold\" id=\"student_id_error\"></span>\n            <span class=\"span-text-validation text-danger text-bold\" id=\"student_term_id_error\"></span>\n            <h6 class=\"hidden d-print-block\">{{selectedTeacher ? selectedTeacher.name : ''}}</h6>\n          </div>\n          <div class=\"vx-col w-full mb-base btn-group d-print-none\" dir=\"ltr\">\n            <vs-button @click=\"getAllTeacherComplaints()\">\n              <i class=\"fa fa-search\"></i>\n            </vs-button>\n            <vs-button color=\"warning\" onclick=\"window.print()\">\n              <i class=\"fa fa-print\"></i>\n            </vs-button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"container-fluid mt--7\">\n      <div class=\"row \">\n        <div class=\"col\">\n          <div class=\"card shadow border-0\">\n            <div class=\"map-canvas\"\n                 style=\"min-height: 600px;\">\n              <div class=\"table-responsive\">\n                <vs-table stripe :data=\"complaints\">\n                  <template slot=\"header\">\n                    <h3>\n\n                    </h3>\n                  </template>\n                  <template slot=\"thead\">\n                    <vs-th width=\"220px\">\n                      {{$ml.get('father_name')}}\n                    </vs-th>\n                    <vs-th>{{$ml.get('text')}}</vs-th>\n                    <vs-th>{{$ml.get('teachers')}}</vs-th>\n                    <vs-th>{{$ml.get('end_at')}}</vs-th>\n                  </template>\n\n                  <template slot-scope=\"{data}\">\n                    <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\n\n                      <vs-td class=\"text-right\">\n                        <slot v-if=\"tr.parent\">\n                          {{tr.parent.father_name}}\n                        </slot>\n                      </vs-td>\n                      <vs-td class=\"text-right\">\n                        {{tr.text}}\n                      </vs-td>\n                      <vs-td class=\"text-right\">\n                        <slot v-if=\"tr.teacher\">\n                          {{tr.teacher.name}}\n                        </slot>\n                      </vs-td>\n                      <vs-td class=\"text-right\">\n                        {{tr.end_at}}\n                      </vs-td>\n\n\n                    </vs-tr>\n                  </template>\n                </vs-table>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\n  import Multiselect from 'vue-multiselect'\n  import 'vue-multiselect/dist/vue-multiselect.min.css'\n\n  export default {\n    data() {\n      return {\n        itemsPerPage: 20,\n        isMounted: false,\n\n        complaints: [],\n        students: [],\n        selectedStudent: null,\n        teachers: [],\n        selectedTeacher: null,\n        isMulti: false,\n      }\n    },\n    mounted() {\n      let vm = this;\n      vm.getAllTeachers()\n      vm.getAllTeacherComplaints()\n    },\n    watch: {\n    },\n    components: {Multiselect},\n    computed: {},\n    methods: {\n      customStageLabel({translated}) {\n        return `${translated.title}`\n      },\n      customStudentLabel({name}) {\n        return `${name}`\n      },\n      getAllTeachers() {\n        let vm = this;\n        vm.$root.$children[0].$refs.loader.show_loader = true;\n        try {\n          window.serviceAPI.API().get(window.serviceAPI.ALL_TEACHERS )\n            .then((response) => {\n              vm.$root.$children[0].$refs.loader.show_loader = false;\n              response = response.data;\n              if (response.status) {\n                vm.teachers = response.data.teachers.data;\n                return\n              }\n              vm.teachers = [];\n            }).catch((error) => {\n            vm.$root.$children[0].$refs.loader.show_loader = false;\n            window.helper.handleError(error, vm);\n            vm.teachers = [];\n          });\n        } catch (e) {\n          console.log(e)\n        }\n      },\n      getAllTeacherComplaints() {\n        let vm = this;\n        vm.$root.$children[0].$refs.loader.show_loader = true;\n        let teacher_id = vm.selectedTeacher ? vm.selectedTeacher.id : '';\n        // let class_room_id = vm.selectedClassRooms ? vm.selectedClassRooms.id : -1;\n        // let student_term_id = vm.selectedStudent ? vm.selectedStudent.student_term.id : -1;\n\n        try {\n          window.serviceAPI.API().get(window.serviceAPI.ALL_PARENTS_COMPLAINTS, {\n            params: {\n              type: 'complaint',\n              teacher_id : teacher_id ,\n              // class_room_id: class_room_id,\n              // student_term_id: student_term_id,\n            }\n          })\n            .then((response) => {\n              vm.$root.$children[0].$refs.loader.show_loader = false;\n              response = response.data;\n              if (response.status) {\n                vm.complaints = response.data.complaints.data;\n                return\n              }\n              vm.complaints = [];\n            }).catch((error) => {\n            vm.$root.$children[0].$refs.loader.show_loader = false;\n            window.helper.handleError(error, vm);\n            vm.complaints = [];\n          });\n        } catch (e) {\n          console.log(e)\n        }\n      },\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}