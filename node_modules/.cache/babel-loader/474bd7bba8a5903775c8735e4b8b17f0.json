{"remainingRequest":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/thread-loader/dist/cjs.js!/home/muhammadawd/WebstormProjects/Guardian/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/muhammadawd/WebstormProjects/Guardian/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/muhammadawd/WebstormProjects/Guardian/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/muhammadawd/WebstormProjects/Guardian/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/muhammadawd/WebstormProjects/Guardian/src/views/Home.vue","mtime":1581504971856},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadawd/WebstormProjects/Guardian/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VueApexCharts from 'vue-apexcharts';\nimport StatisticsCardLine from '@/components/statistics-cards/StatisticsCardLine.vue';\nimport ECharts from 'vue-echarts/components/ECharts';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/legend';\nimport 'echarts/lib/chart/pie';\nimport 'echarts/lib/chart/bar';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/legend';\nimport 'echarts/lib/chart/line';\nexport default {\n  data: function data() {\n    return {\n      topStudentAbsence: [],\n      stages: [],\n      studentStages: {\n        // Make gradient line here\n        visualMap: [{\n          show: false,\n          type: 'continuous',\n          seriesIndex: 0,\n          min: 0,\n          max: 400\n        }],\n        tooltip: {\n          trigger: 'axis'\n        },\n        xAxis: {\n          data: ['test', 'test']\n        },\n        yAxis: {\n          splitLine: {\n            show: false\n          }\n        },\n        series: {\n          type: 'line',\n          showSymbol: false,\n          data: []\n        }\n      },\n      topStudentAbsencelineChart: {\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a} <br/>{b} : {c} ({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'left',\n          data: []\n        },\n        series: [{\n          name: 'مرات الغياب',\n          type: 'pie',\n          radius: '55%',\n          center: ['50%', '60%'],\n          color: ['#FF9F43', '#28C76F', '#42a4f6', '#2e2e2e', '#EA5455'],\n          data: [],\n          itemStyle: {\n            emphasis: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n          }\n        }]\n      }\n    };\n  },\n  components: {\n    ECharts: ECharts,\n    VueApexCharts: VueApexCharts,\n    StatisticsCardLine: StatisticsCardLine\n  },\n  mounted: function mounted() {\n    var auth_data = JSON.parse(window.ls.getFromStorage('auth_data'));\n\n    if (auth_data.type == 'student') {\n      this.$router.push({\n        name: 'home_student'\n      });\n    } else if (auth_data.type == 'teacher') {\n      this.$router.push({\n        name: 'home_teacher'\n      });\n    } else {\n      console.log('i\\'m here');\n    }\n\n    this.getHomeData();\n  },\n  methods: {\n    pieAnimation: function pieAnimation() {\n      var vm = this;\n      var dataIndex = -1;\n      var pie = vm.$refs.pie;\n      var dataLen = pie.options.series[0].data.length;\n      var Interval = setInterval(function () {\n        pie.dispatchAction({\n          type: 'downplay',\n          seriesIndex: 0,\n          dataIndex: dataIndex\n        });\n        dataIndex = (dataIndex + 1) % dataLen;\n        pie.dispatchAction({\n          type: 'highlight',\n          seriesIndex: 0,\n          dataIndex: dataIndex\n        });\n        pie.dispatchAction({\n          type: 'showTip',\n          seriesIndex: 0,\n          dataIndex: dataIndex\n        });\n      }, 1000);\n      setTimeout(function () {\n        clearInterval(Interval);\n      }, 5500);\n    },\n    getHomeData: function getHomeData() {\n      var vm = this;\n      vm.$root.$children[0].$refs.loader.show_loader = true;\n\n      try {\n        window.serviceAPI.API().get(window.serviceAPI.GET_ADMIN_HOME_DATA).then(function (response) {\n          vm.$root.$children[0].$refs.loader.show_loader = false;\n          response = response.data;\n\n          if (response.status) {\n            vm.stages = response.data.stages;\n            vm.topStudentAbsence = response.data.topStudentAbsence; // vm.topStudentAbsencelineChart.legend.data = [vm.$ml.get('late'), vm.$ml.get('present'), vm.$ml.get('absence')]\n            // vm.topStudentAbsencelineChart.series[0].data = [\n            //   {value: response.data.absence_statistic.late, name: vm.$ml.get('late')},\n            //   {value: response.data.absence_statistic.present, name: vm.$ml.get('present')},\n            //   {value: response.data.absence_statistic.absence, name: vm.$ml.get('absence')},\n            // ]\n\n            var dataPie = _.map(vm.topStudentAbsence, function (item) {\n              return {\n                name: item.student ? item.student.name : '',\n                value: item.absence_count\n              };\n            });\n\n            vm.topStudentAbsencelineChart.legend.data = _.map(dataPie, 'name');\n            vm.topStudentAbsencelineChart.series[0].data = dataPie; //\n\n            var xData = _.map(vm.stages, 'translated.title');\n\n            var yData = _.map(vm.stages, 'students_count');\n\n            vm.studentStages.xAxis.data = xData;\n            vm.studentStages.series.data = yData;\n            vm.pieAnimation();\n            return;\n          }\n        }).catch(function (error) {\n          vm.$root.$children[0].$refs.loader.show_loader = false;\n          window.helper.handleError(error, vm);\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"vx-row\">\r\n      <div class=\"vx-col md:w-1/4 mb-base\">\r\n        <h3 class=\"text-bold text-center\">{{$ml.get('top_absense_students')}}</h3>\r\n        <e-charts autoresize :options=\"topStudentAbsencelineChart\" ref=\"pie\" auto-resize/>\r\n\r\n      </div>\r\n      <div class=\"vx-col md:w-3/4 mb-base\">\r\n        <h3 class=\"text-bold text-center\">{{$ml.get('student_count_term')}}</h3>\r\n        <e-charts autoresize :options=\"studentStages\" theme=\"ovilia-green\" ref=\"line\" auto-resize/>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import VueApexCharts from 'vue-apexcharts'\r\n  import StatisticsCardLine from '@/components/statistics-cards/StatisticsCardLine.vue'\r\n  import ECharts from 'vue-echarts/components/ECharts'\r\n  import 'echarts/lib/component/tooltip'\r\n  import 'echarts/lib/component/legend'\r\n  import 'echarts/lib/chart/pie'\r\n  import 'echarts/lib/chart/bar'\r\n  import 'echarts/lib/component/tooltip'\r\n  import 'echarts/lib/component/legend'\r\n  import 'echarts/lib/chart/line'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        topStudentAbsence: [],\r\n        stages: [],\r\n        studentStages: {\r\n\r\n          // Make gradient line here\r\n          visualMap: [{\r\n            show: false,\r\n            type: 'continuous',\r\n            seriesIndex: 0,\r\n            min: 0,\r\n            max: 400\r\n          }],\r\n          tooltip: {\r\n            trigger: 'axis'\r\n          },\r\n          xAxis: {\r\n            data: ['test', 'test']\r\n          },\r\n          yAxis: {\r\n            splitLine: {show: false},\r\n          },\r\n          series: {\r\n            type: 'line',\r\n            showSymbol: false,\r\n            data: []\r\n          }\r\n        },\r\n\r\n        topStudentAbsencelineChart: {\r\n          tooltip: {\r\n            trigger: 'item',\r\n            formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n          },\r\n          legend: {\r\n            orient: 'vertical',\r\n            left: 'left',\r\n            data: []\r\n          },\r\n          series: [\r\n            {\r\n              name: 'مرات الغياب',\r\n              type: 'pie',\r\n              radius: '55%',\r\n              center: ['50%', '60%'],\r\n              color: ['#FF9F43', '#28C76F', '#42a4f6', '#2e2e2e', '#EA5455'],\r\n              data: [],\r\n              itemStyle: {\r\n                emphasis: {\r\n                  shadowBlur: 10,\r\n                  shadowOffsetX: 0,\r\n                  shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        },\r\n      }\r\n    },\r\n    components: {\r\n      ECharts,\r\n      VueApexCharts,\r\n      StatisticsCardLine\r\n    },\r\n    mounted() {\r\n      let auth_data = JSON.parse(window.ls.getFromStorage('auth_data'));\r\n      if (auth_data.type == 'student') {\r\n        this.$router.push({name: 'home_student'})\r\n      } else if (auth_data.type == 'teacher') {\r\n        this.$router.push({name: 'home_teacher'})\r\n      } else {\r\n        console.log('i\\'m here')\r\n      }\r\n\r\n      this.getHomeData();\r\n    },\r\n    methods: {\r\n      pieAnimation() {\r\n\r\n        let vm = this;\r\n        let dataIndex = -1\r\n        let pie = vm.$refs.pie\r\n\r\n        let dataLen = pie.options.series[0].data.length\r\n        let Interval = setInterval(() => {\r\n          pie.dispatchAction({\r\n            type: 'downplay',\r\n            seriesIndex: 0,\r\n            dataIndex\r\n          })\r\n          dataIndex = (dataIndex + 1) % dataLen\r\n          pie.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 0,\r\n            dataIndex\r\n          })\r\n          pie.dispatchAction({\r\n            type: 'showTip',\r\n            seriesIndex: 0,\r\n            dataIndex\r\n          })\r\n        }, 1000);\r\n\r\n        setTimeout(() => {\r\n          clearInterval(Interval)\r\n        }, 5500)\r\n      },\r\n      getHomeData() {\r\n        let vm = this;\r\n        vm.$root.$children[0].$refs.loader.show_loader = true;\r\n        try {\r\n          window.serviceAPI.API().get(window.serviceAPI.GET_ADMIN_HOME_DATA)\r\n            .then((response) => {\r\n              vm.$root.$children[0].$refs.loader.show_loader = false;\r\n              response = response.data;\r\n              if (response.status) {\r\n                vm.stages = response.data.stages;\r\n                vm.topStudentAbsence = response.data.topStudentAbsence;\r\n                // vm.topStudentAbsencelineChart.legend.data = [vm.$ml.get('late'), vm.$ml.get('present'), vm.$ml.get('absence')]\r\n                // vm.topStudentAbsencelineChart.series[0].data = [\r\n                //   {value: response.data.absence_statistic.late, name: vm.$ml.get('late')},\r\n                //   {value: response.data.absence_statistic.present, name: vm.$ml.get('present')},\r\n                //   {value: response.data.absence_statistic.absence, name: vm.$ml.get('absence')},\r\n                // ]\r\n                let dataPie = _.map(vm.topStudentAbsence, (item) => {\r\n                  return {\r\n                    name: item.student ? item.student.name : '',\r\n                    value: item.absence_count,\r\n                  };\r\n                })\r\n                vm.topStudentAbsencelineChart.legend.data = _.map(dataPie, 'name')\r\n                vm.topStudentAbsencelineChart.series[0].data = dataPie\r\n                //\r\n                let xData = _.map(vm.stages, 'translated.title')\r\n                let yData = _.map(vm.stages, 'students_count')\r\n                vm.studentStages.xAxis.data = (xData)\r\n                vm.studentStages.series.data = (yData)\r\n                vm.pieAnimation()\r\n                return\r\n              }\r\n            }).catch((error) => {\r\n            vm.$root.$children[0].$refs.loader.show_loader = false;\r\n            window.helper.handleError(error, vm);\r\n          });\r\n        } catch (e) {\r\n          console.log(e)\r\n        }\r\n      },\r\n    }\r\n  }\r\n</script>\r\n"],"sourceRoot":"src/views"}]}