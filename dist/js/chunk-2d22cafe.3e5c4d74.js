(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22cafe"],{f3fa:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full md:w-1/4 mb-base text-right"},[s("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$ml.get("date")))]),s("flat-pickr",{staticClass:"w-full d-print-none",attrs:{config:{mode:"range"},label:t.$ml.get("end_date")},model:{value:t.filterModel.date,callback:function(e){t.$set(t.filterModel,"date",e)},expression:"filterModel.date"}}),s("h6",{staticClass:"hidden d-print-block"},[t._v(t._s(t.filterModel.date))])],1),s("div",{staticClass:"vx-col w-full md:w-1/5 mb-base text-right"},[s("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$ml.get("type")))]),s("vs-select",{staticClass:"w-full",model:{value:t.filterModel.type,callback:function(e){t.$set(t.filterModel,"type",e)},expression:"filterModel.type"}},[s("vs-select-item",{attrs:{value:"leave",text:t.$ml.get("leave")}}),s("vs-select-item",{attrs:{value:"vacancy",text:t.$ml.get("vacancy")}})],1)],1),s("div",{staticClass:"vx-col md:w-1/5 mb-base text-right"},[s("label",{staticClass:"vs-input--label"},[t._v(t._s(t.$ml.get("status")))]),s("vs-select",{staticClass:"w-full",model:{value:t.filterModel.status_id,callback:function(e){t.$set(t.filterModel,"status_id",e)},expression:"filterModel.status_id"}},t._l(t.status,(function(t,e){return s("vs-select-item",{key:e,attrs:{value:t.id,text:t.translated.title}})})),1)],1)]),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full"},[s("div",{staticClass:"vx-row  text-right"},[s("div",{staticClass:"vx-col w-full mb-base btn-group d-print-none",attrs:{dir:"ltr"}},[s("vs-button",{on:{click:function(e){return t.getAllTeacherLeaves()}}},[s("i",{staticClass:"fa fa-search"})]),s("vs-button",{attrs:{color:"warning",onclick:"window.print()"}},[s("i",{staticClass:"fa fa-print"})])],1)])])]),s("div",{staticClass:"container-fluid mt--7"},[s("div",{staticClass:"row "},[s("div",{staticClass:"col"},[s("div",{staticClass:"card shadow border-0"},[s("div",{staticClass:"map-canvas",staticStyle:{"min-height":"600px"}},[s("div",{staticClass:"table-responsive"},[s("vs-table",{attrs:{stripe:"",data:t.teacher_leaves},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a},[s("vs-td",{staticClass:"text-right"},[e.teacher?s("span",[t._v("\n                          "+t._s(e.teacher.name)+"\n                        ")]):t._e()]),s("vs-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(t.$ml.get(e.type))+"\n                      ")]),s("vs-td",{staticClass:"text-right"},[e.status?s("span",[s("div",{staticClass:"con-vs-chip ml-auto  con-color",class:t.getStatusClass(e.status.name),staticStyle:{color:"rgba(255, 255, 255, 0.9)"}},[s("span",{staticClass:"text-chip vs-chip--text"},[t._v(t._s(e.status.translated.title))])])]):t._e()]),s("vs-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.start_date)+"\n                      ")]),s("vs-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.end_date)+"\n                      ")])],1)}))}}])},[s("template",{slot:"header"},[s("h3")]),s("template",{slot:"thead"},[s("vs-th",{attrs:{width:"220px"}},[t._v("\n                      "+t._s(t.$ml.get("name"))+"\n                    ")]),s("vs-th",[t._v(t._s(t.$ml.get("type")))]),s("vs-th",[t._v(t._s(t.$ml.get("status")))]),s("vs-th",[t._v(t._s(t.$ml.get("start_date")))]),s("vs-th",[t._v(t._s(t.$ml.get("end_date")))])],1)],2)],1)])])])])])])},l=[],r=(s("7f7f"),s("28a5"),s("c38f")),i=s.n(r),c=(s("0952"),{components:{flatPickr:i.a},data:function(){return{status:[],teacher_leaves:[],selected:[],itemsPerPage:5,isMounted:!1,filterModel:{}}},mounted:function(){this.isMounted=!0,this.getAllStatus(),this.getAllTeacherLeaves()},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0}},methods:{hasAccessPermission:function(t){return window.helper.hasAccessPermission(t)},getAllStatus:function(){var t=this;t.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().get(window.serviceAPI.ALL_STATUS).then((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,e=e.data,console.log(e),e.status?t.status=e.data.status.teacher_leave:t.status=[]})).catch((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(e,t),t.status=[]}))}catch(e){console.log(e)}},getStatusClass:function(t){return"accepted"==t?"vs-chip-success":"rejected"==t?"vs-chip-danger":"vs-chip-warning"},prepareFilter:function(t){var e=t.date,s=null,a=null;if(e){var l=e.split(" to ");s=l[0],a=l[1]}return{status_id:t.status_id,type:t.type,start_date:s,end_date:a||s}},getAllTeacherLeaves:function(){var t=this;t.$root.$children[0].$refs.loader.show_loader=!0;var e=t.prepareFilter(t.filterModel);try{window.serviceAPI.API().get(window.serviceAPI.ALL_TEACHER_LEAVES,{params:e}).then((function(e){if(t.$root.$children[0].$refs.loader.show_loader=!1,e=e.data,e.status)return t.teacher_leaves=e.data.teacherLeaves.data,void _.transform(e.data.teacherLeaves.data,(function(t,e,s){e.teacher_name=e.teacher?e.teacher.name:"",e.status_name=e.status.translated.title,t[s]=e}),{});t.teacher_leaves=[]})).catch((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(e,t),t.teacher_leaves=[]}))}catch(s){console.log(s)}},deleteSelected:function(){this.$vs.dialog({type:"confirm",color:"danger",title:this.$ml.get("confirm"),text:this.$ml.get("are_sure"),acceptText:this.$ml.get("yes"),cancelText:this.$ml.get("no"),accept:this.acceptAlert})},acceptAlert:function(){var t=this,e=t.selected;t.$root.$children[0].$refs.loader.show_loader=!0,e=_.map(e,"id"),console.log(e);try{window.serviceAPI.API().post(window.serviceAPI.DELETE_TEACHER_LEAVES,{ids:e}).then((function(s){t.$root.$children[0].$refs.loader.show_loader=!1,s=s.data,s.status&&(t.teacher_leaves=window.helper.deleteMulti(e,t.teacher_leaves),location.reload())})).catch((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(e,t)}))}catch(s){console.log(s)}},deleteSingle:function(t){var e=this;this.$vs.dialog({type:"confirm",color:"danger",title:this.$ml.get("confirm"),text:this.$ml.get("are_sure"),acceptText:this.$ml.get("yes"),cancelText:this.$ml.get("no"),accept:function(){e.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().post(window.serviceAPI.DELETE_TEACHER_LEAVES,{ids:[t]}).then((function(s){e.$root.$children[0].$refs.loader.show_loader=!1,s=s.data,s.status&&(e.teacher_leaves=window.helper.deleteMulti([t],e.teacher_leaves),location.reload())})).catch((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(t,e)}))}catch(s){console.log(s)}}})}}}),o=c,n=s("2877"),d=Object(n["a"])(o,a,l,!1,null,"dcc1af50",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d22cafe.3e5c4d74.js.map