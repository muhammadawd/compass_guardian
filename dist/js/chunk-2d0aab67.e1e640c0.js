(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aab67"],{"11d5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"knowledge-base-page"}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full md:w-1/1 mb-base"},[a("vx-card",{staticClass:"text-right"},[a("vs-alert",{staticClass:"mb-4",attrs:{color:"dark"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(e.$ml.get("add_questions_bank")))])]),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 mb-base"},[a("vs-input",{staticClass:"w-full",attrs:{label:e.$ml.get("question_degree")},model:{value:e.dataModel.degree,callback:function(t){e.$set(e.dataModel,"degree",t)},expression:"dataModel.degree"}}),a("span",{staticClass:"span-text-validation text-danger text-bold",attrs:{id:"degree_error"}})],1),a("div",{staticClass:"vx-col md:w-1/4 mb-base"},[a("vs-select",{staticClass:"w-full",attrs:{label:e.$ml.get("question_type")},on:{change:function(t){return e.changeQuestionType()}},model:{value:e.dataModel.type,callback:function(t){e.$set(e.dataModel,"type",t)},expression:"dataModel.type"}},[a("vs-select-item",{attrs:{value:"mcq",text:e.$ml.get("mcq")}}),a("vs-select-item",{attrs:{value:"true_false",text:e.$ml.get("true_false")}}),a("vs-select-item",{attrs:{value:"text",text:e.$ml.get("_text")}})],1),a("span",{staticClass:"span-text-validation text-danger text-bold",attrs:{id:"type_error"}})],1),a("div",{staticClass:"vx-col md:w-1/4 mb-base"},[a("label",{staticClass:"vs-input--label"},[e._v(e._s(e.$ml.get("subjects")))]),a("multiselect",{attrs:{options:e.subjects,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:e.$ml.get("search"),"custom-label":e.customLabel,"track-by":"id","preselect-first":!0},model:{value:e.selectedSubjects,callback:function(t){e.selectedSubjects=t},expression:"selectedSubjects"}}),a("span",{staticClass:"span-text-validation text-danger text-bold",attrs:{id:"subject_id_error"}})],1),a("div",{staticClass:"vx-col md:w-1/4 mb-base"},[a("label",{staticClass:"vs-input--label"},[e._v(e._s(e.$ml.get("stages")))]),a("multiselect",{attrs:{options:e.stages,multiple:!1,"close-on-select":!0,"open-direction":"bottom","clear-on-select":!1,"preserve-search":!0,placeholder:e.$ml.get("search"),"custom-label":e.customStageLabel,"track-by":"id","preselect-first":!0},model:{value:e.selectedStage,callback:function(t){e.selectedStage=t},expression:"selectedStage"}}),a("span",{staticClass:"span-text-validation text-danger text-bold",attrs:{id:"stage_id_error"}})],1),a("div",{staticClass:"vx-col w-full mb-base"},[a("vs-textarea",{attrs:{label:e.$ml.get("question"),rows:"5"},model:{value:e.dataModel.name,callback:function(t){e.$set(e.dataModel,"name",t)},expression:"dataModel.name"}}),a("span",{staticClass:"span-text-validation text-danger text-bold",attrs:{id:"name_error"}})],1)]),a("span",{staticClass:"span-text-validation text-danger text-bold",attrs:{id:"answers_error"}}),"mcq"==e.dataModel.type?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full mb-base"},[a("div",{staticClass:"vx-col w-full mb-base"},[a("vs-button",{staticClass:"text-bold",attrs:{color:"primary",type:"filled","icon-pack":"feather",icon:"icon-plus"},on:{click:function(t){return e.dataModel.answers.push({value:"",is_correct:0})}}})],1),a("div",{staticClass:"vx-col w-full mb-base"},[a("div",{staticClass:"vx-row"},e._l(e.dataModel.answers,(function(t,s){return a("div",{key:s,staticClass:"vx-col md:w-1/4 mb-base"},[a("label",{staticClass:"vs-input--label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataModel.answers[s].is_correct,expression:"dataModel.answers[key].is_correct"}],attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.dataModel.answers[s].is_correct)?e._i(e.dataModel.answers[s].is_correct,"1")>-1:e.dataModel.answers[s].is_correct},on:{change:function(t){var a=e.dataModel.answers[s].is_correct,l=t.target,o=!!l.checked;if(Array.isArray(a)){var r="1",c=e._i(a,r);l.checked?c<0&&e.$set(e.dataModel.answers[s],"is_correct",a.concat([r])):c>-1&&e.$set(e.dataModel.answers[s],"is_correct",a.slice(0,c).concat(a.slice(c+1)))}else e.$set(e.dataModel.answers[s],"is_correct",o)}}}),e._v("\n                    "+e._s(e.$ml.get("answer"))+"\n                  ")]),a("vs-input",{staticClass:"w-full",model:{value:e.dataModel.answers[s].value,callback:function(t){e.$set(e.dataModel.answers[s],"value",t)},expression:"dataModel.answers[key].value"}})],1)})),0)])])]):e._e(),"true_false"==e.dataModel.type?a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 mb-base"},[a("vs-select",{staticClass:"w-full",attrs:{label:e.$ml.get("answer")},on:{change:function(t){return e.changeQuestionTruefalse()}},model:{value:e.dataModel.true_false,callback:function(t){e.$set(e.dataModel,"true_false",t)},expression:"dataModel.true_false"}},[a("vs-select-item",{attrs:{value:"true",text:e.$ml.get("true")}}),a("vs-select-item",{attrs:{value:"false",text:e.$ml.get("false")}})],1)],1)]):e._e(),"text"==e.dataModel.type?a("div",{staticClass:"vx-row"},[e.dataModel.answers[0]?a("div",{staticClass:"vx-col w-full mb-base"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dataModel.answers[0].is_correct,expression:"dataModel.answers[0].is_correct"}],attrs:{type:"hidden",value:"1"},domProps:{value:e.dataModel.answers[0].is_correct},on:{input:function(t){t.target.composing||e.$set(e.dataModel.answers[0],"is_correct",t.target.value)}}}),a("vs-textarea",{attrs:{label:e.$ml.get("answer"),rows:"5"},model:{value:e.dataModel.answers[0].value,callback:function(t){e.$set(e.dataModel.answers[0],"value",t)},expression:"dataModel.answers[0].value"}})],1):e._e()]):e._e(),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full text-center mb-base"},[a("vs-button",{ref:"loadableButton",staticClass:"vs-con-loading__container vs-button-dark text-bold",attrs:{id:"button-with-loading",disabled:e.loading,type:"filled",vslor:"primary"},on:{click:e.addQuestion}},[e._v("\n              "+e._s(e.$ml.get("add"))+"\n            ")])],1)])],1)],1)])])},l=[],o=a("8e5f"),r=a.n(o),c=(a("e607"),{components:{Multiselect:r.a},data:function(){return{dataModel:{type:"mcq",answers:[]},teacher:{},q_types:["mcq","true_false","text"],subjects:[],selectedSubjects:null,stages:[],selectedStage:null,loading:!1}},computed:{},mounted:function(){var e=JSON.parse(window.ls.getFromStorage("auth_data"));this.findId=e.user.id,this.findTeacher(),this.getAllStages(),this.getAllSubjects()},methods:{customLabel:function(e){var t=e.translated;return"".concat(t.title)},customStageLabel:function(e){var t=e.translated;return"".concat(t.title)},getAllStages:function(){var e=this;e.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().get(window.serviceAPI.ALL_STAGES).then((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,t=t.data,t.status?e.stages=t.data.stages.data:e.stages=[]})).catch((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(t,e),e.stages=[]}))}catch(t){console.log(t)}},changeQuestionType:function(){this.dataModel.answers=[],console.log(this.dataModel.type),"text"==this.dataModel.type&&(this.dataModel.answers=[{value:"",is_correct:1}])},changeQuestionTruefalse:function(){var e=this,t=0,a=0;"true"==e.dataModel.true_false?(t=1,a=0):(t=0,a=1),e.dataModel.answers[0]={value:"true",is_correct:t},e.dataModel.answers[1]={value:"false",is_correct:a}},findTeacher:function(){var e=this,t=e.findId;e.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().get(window.serviceAPI.FIND_TEACHERS+"/".concat(t)).then((function(t){if(e.$root.$children[0].$refs.loader.show_loader=!1,t=t.data,t.status)return e.teacher=t.data.teacher,void(e.subjects=t.data.teacher.subjects)})).catch((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(t,e)}))}catch(a){console.log(a)}},getAllSubjects:function(){var e=this;e.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().get(window.serviceAPI.ALL_SUBJECTS).then((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,t=t.data,console.log(t),t.status?e.subjects=t.data.subjects.data:e.subjects=[]})).catch((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(t,e),e.subjects=[]}))}catch(t){console.log(t)}},addQuestion:function(){var e=this;e.openLoadingContained();var t=e.dataModel;t.stage_id=e.selectedStage?e.selectedStage.id:"",t.subject_id=e.selectedSubjects?e.selectedSubjects.id:"",$(".span-text-validation").text("");try{window.serviceAPI.API().post(window.serviceAPI.ADD_QUESTION,t).then((function(t){if(t=t.data,t.status)return window.helper.showMessage("success",e),e.$router.push({name:"questions_bank"}),null;e.closeLoadingContained()})).catch((function(t){e.closeLoadingContained(),window.helper.handleError(t,e)}))}catch(a){console.log(a)}},openLoadingContained:function(){this.loading=!0,this.$vs.loading({background:"#000",color:"#fff",container:"#button-with-loading",scale:.45})},closeLoadingContained:function(){var e=this;setTimeout((function(){e.loading=!1,e.$vs.loading.close("#button-with-loading > .con-vs-loading")}),100)}}}),n=c,d=a("2877"),i=Object(d["a"])(n,s,l,!1,null,null,null);t["default"]=i.exports}}]);
//# sourceMappingURL=chunk-2d0aab67.e1e640c0.js.map