(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-641654e0"],{"037c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col md:w-1/4 mb-base"},[s("vx-card",{staticClass:" cursor-pointer"},[s("vs-select",{attrs:{label:t.$ml.get("stage")},on:{change:function(e){return t.getAllSubjects()}},model:{value:t.current_stage,callback:function(e){t.current_stage=e},expression:"current_stage"}},t._l(t.stages,(function(t,e){return s("vs-select-item",{key:e,attrs:{value:t.id,text:t.translated.title}})})),1),s("vs-collapse",{attrs:{type:"margin"}},t._l(t.subjects,(function(e,a){return s("vs-collapse-item",{key:a},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n              "+t._s(e.translated.title)+"\n              "),s("vs-button",{staticClass:"float-left",attrs:{size:"small",color:"primary",disabled:0==e.scientific_attachments.length},on:{click:function(s){return t.getAllScientificAttachment(e.id)}}},[t._v("\n                "+t._s(t.$ml.get("all"))+"\n              ")])],1),0==e.scientific_attachments.length?s("vs-list",[s("vs-list-item",{attrs:{title:t.$ml.get("no_data")}})],1):t._e(),t._l(e.scientific_attachments,(function(t,e){return s("vs-list",{key:e},[s("vs-list-item",{attrs:{title:t.translated.title,subtitle:(t.teacher?t.teacher.name:"")+" - "+(t.term?t.term.translated.title:"")}})],1)}))],2)})),1)],1)],1),s("div",{staticClass:"vx-col md:w-3/4 mb-base"},[s("vx-card",{staticClass:"text-center cursor-pointer"},[s("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":t.itemsPerPage,search:"",data:t.scientificAttachments},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a,attrs:{data:e}},[s("vs-td",{staticClass:"text-right"},[t._v("\n                "+t._s(e.title_ar)+"\n              ")]),s("vs-td",{staticClass:"text-right"},[t._v("\n                "+t._s(e.title_en)+"\n              ")]),s("vs-td",{staticClass:"text-right"},[e.teacher?t._t("default",[t._v("\n                  "+t._s(e.teacher.name)+"\n                ")]):t._e()],2),s("vs-td",{staticClass:"text-right"},[s("div",{staticClass:"btn-group",attrs:{dir:"ltr"}},[t.hasAccessPermission("delete-attachment")?s("vs-button",{attrs:{type:"line",color:"danger"},on:{click:function(s){return t.deleteSingle(e.id)}}},[s("i",{staticClass:"fa fa-times"})]):t._e(),t.hasAccessPermission("show-attachment")?s("vs-button",{attrs:{type:"line",color:"primary"},on:{click:function(s){return t.$router.push({name:"scientific_attachment_edit",params:{id:e.id}})}}},[s("i",{staticClass:"fa fa-edit"})]):t._e()],1)])],1)}))}}],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"flex flex-wrap-reverse items-center"},[t.hasAccessPermission("create-attachment")?s("vs-button",{staticClass:"text-bold",attrs:{color:"primary",type:"filled","icon-pack":"feather",icon:"icon-plus"},on:{click:function(e){return t.$router.push({name:"scientific_attachment_add"})}}},[t._v("\n                "+t._s(t.$ml.get("add_new"))+"\n              ")]):t._e()],1),s("vs-dropdown",{staticClass:"cursor-pointer mb-4 ml-4",attrs:{"vs-trigger-click":""}},[s("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium",attrs:{dir:"ltr"}},[s("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.scientificAttachments.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.scientificAttachments.length)+" of "+t._s(t.scientificAttachments.length))]),s("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),s("vs-dropdown-menu",[s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=5}}},[s("span",[t._v("5")])]),s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[s("span",[t._v("10")])]),s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=15}}},[s("span",[t._v("15")])]),s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[s("span",[t._v("20")])])],1)],1)],1),s("template",{slot:"thead"},[s("vs-th",[t._v(t._s(t.$ml.get("title_ar")))]),s("vs-th",[t._v(t._s(t.$ml.get("title_en")))]),s("vs-th",[t._v(t._s(t.$ml.get("teachers")))]),s("vs-th",{attrs:{width:"15%"}})],1)],2)],1),t.hasAccessPermission("delete-attachment")?s("vs-button",{staticClass:"mt-4",attrs:{disabled:0==t.selected.length},on:{click:function(e){return t.deleteSelected()}}},[t._v("\n        "+t._s(t.$ml.get("delete_selected"))+"\n      ")]):t._e()],1)])])},i=[],n={data:function(){return{scientificAttachments:[],selected:[],subjects:[],stages:[],itemsPerPage:5,current_stage:"",isMounted:!1}},mounted:function(){this.isMounted=!0,this.getAllSubjects(),this.getAllStages()},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0}},methods:{hasAccessPermission:function(t){return window.helper.hasAccessPermission(t)},getAllStages:function(){var t=this;t.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().get(window.serviceAPI.ALL_STAGES).then((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,e=e.data,console.log(e),e.status?t.stages=e.data.stages.data:t.stages=[]})).catch((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(e,t),t.stages=[]}))}catch(e){console.log(e)}},getAllSubjects:function(){var t=this;t.$root.$children[0].$refs.loader.show_loader=!0;var e=t.current_stage;try{window.serviceAPI.API().get(window.serviceAPI.ALL_SUBJECTS,{params:{stage_id:e,attachment:!0}}).then((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,e=e.data,e.status?t.subjects=e.data.subjects.data:t.subjects=[]})).catch((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(e,t),t.subjects=[]}))}catch(s){console.log(s)}},getAllScientificAttachment:function(t){var e=this;e.$root.$children[0].$refs.loader.show_loader=!0;var s=e.current_stage;try{window.serviceAPI.API().get(window.serviceAPI.ALL_SCIENTIFIC_ATTACHMENT,{params:{subject_id:t,stage_id:s}}).then((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,t=t.data,console.log(t),t.status?e.scientificAttachments=t.data.scientificAttachments.data:e.scientificAttachments=[]})).catch((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(t,e),e.scientificAttachments=[]}))}catch(a){console.log(a)}},deleteSelected:function(){this.$vs.dialog({type:"confirm",color:"danger",title:this.$ml.get("confirm"),text:this.$ml.get("are_sure"),acceptText:this.$ml.get("yes"),cancelText:this.$ml.get("no"),accept:this.acceptAlert})},acceptAlert:function(){var t=this,e=t.selected;t.$root.$children[0].$refs.loader.show_loader=!0,e=_.map(e,"id"),console.log(e);try{window.serviceAPI.API().post(window.serviceAPI.DELETE_SCIENTIFIC_ATTACHMENT,{ids:e}).then((function(s){t.$root.$children[0].$refs.loader.show_loader=!1,s=s.data,s.status&&(t.scientificAttachments=window.helper.deleteMulti(e,t.scientificAttachments),location.reload())})).catch((function(e){t.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(e,t)}))}catch(s){console.log(s)}},deleteSingle:function(t){var e=this;this.$vs.dialog({type:"confirm",color:"danger",title:this.$ml.get("confirm"),text:this.$ml.get("are_sure"),acceptText:this.$ml.get("yes"),cancelText:this.$ml.get("no"),accept:function(){e.$root.$children[0].$refs.loader.show_loader=!0;try{window.serviceAPI.API().post(window.serviceAPI.DELETE_SCIENTIFIC_ATTACHMENT,{ids:[t]}).then((function(s){e.$root.$children[0].$refs.loader.show_loader=!1,s=s.data,s.status&&(e.scientificAttachments=window.helper.deleteMulti([t],e.scientificAttachments),location.reload())})).catch((function(t){e.$root.$children[0].$refs.loader.show_loader=!1,window.helper.handleError(t,e)}))}catch(s){console.log(s)}}})}}},r=n,c=(s("1ad1"),s("2877")),o=Object(c["a"])(r,a,i,!1,null,null,null);e["default"]=o.exports},"1ad1":function(t,e,s){"use strict";var a=s("898b"),i=s.n(a);i.a},"898b":function(t,e,s){}}]);
//# sourceMappingURL=chunk-641654e0.09f0fc83.js.map